<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>websocket in html</title>
</head>
<body>
<h2>websocket connected in html</h2>
<script type="text/javascript">
    const socket = new WebSocket("ws://127.0.0.1:8888/websocket/1");
    socket.onopen = (WS) => {
        console.log("建立连接 : " + WS);
    };

    socket.onmessage = (WS) => {
        console.log("接收消息 >> ", WS.data);
    };

    socket.onclose = (WS) => {
        console.log("连接已断开", WS);
    };

    socket.onerror = (WS) => {
        console.log("发生错误", WS);
    };

    setInterval(() => {
        socket.send("发送一条消息");
    }, 3000);

    setTimeout(() => {
        socket.close();
        console.log("已定时关闭。。。")
    }, 15000);
</script>
</body>
</html>